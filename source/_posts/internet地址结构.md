---
title: Intern 地址结构
date: 2022-01-03 16:03
author: Jack-zhang
categories: config
tags:
   - config
   - HTTP
summary: Intern 地址结构
---

## 表示 IP 地址

> IPv4 使用点分四组的表示方法

* 例如：`0.0.0.0`-->`00000000 00000000 00000000 00000000`

> IPv6 地址的长度试 128 位,是 IPv4 地址长度的 4 倍。IPv6采用 4 个十六进制的数表示

* 例如：`2001:0db8:85a3:0042:1000:8a2e:0370:7334`

1. 一个块中前导的 0 可以不写：例如上面的例子`2001:db8:85a3:42:1000:8a2e:370:7334`
2. 全 0 的块可以省略,并使用 `::`代替。但是为了避免出现歧义,一个 IPv6 的地址中`::`只能使用一次(缩头不缩尾)。例如：`2001:db8:0000:0000:0000:8a2e:0000:0000`就只能写成`2001:db8::8a2e:0:0`而不能写成`2001:db8::8a2e::`
3. IPv6 格式中嵌入 IPv4 地址可以使用混合符号形式,紧接着 IPv4 部分地址块的的值为 `ffff`,其他的使用点分四组格式。。例如`::ffff:10.0.0.1`IPv4 映射的 IPv6 地址

## 基本的 IP 地址结构

* **单播(unicast):**:
  1. 在网络中数据通过路由器交换机传给特定的主机
  2. 类似于现实中一个人对另一个人说的话.
  3. 适用于收发电子邮件,浏览网页等的<span style="color:red">一对一的通讯模式</span>(在IPv6中全球单播地址一般是`2或者3`开头的)
* **组播(multicast)**:
  1. 相对于单播广播,组播只对同组成员的数据包传递方式.在网络中,交换机会有选择的复制并传输数据.即只将组内数据传输给加入组的主机.这样一次将数据传输给多个有需要的主机,又能保证不影响其它不需要的主机其他数据
  2. 类似于现实中一个人向多个人说话,而不是所有人
  3. 适用于网络视频会议,网上视频点播等的<span style="color:red">一对一组的通讯模式</span>
* **广播(broadcast)**:
  1. 在网络中表现为交换机会对网络中的数据无条件的赋值并转发,路由器默认不转发.这样在同一网络下的所有主机都可以接收到所有信息
  2. 类似于现实中一个喇叭对在场所有人讲话
  3. 只对同一网络下的所有成员的传输方式.适用于需要网络中主机之间<span style="color:red">一对所有的通讯模式的很多网络协议</span>例如:ARP,DHCP
* **任播(anycast)**:<span style="color:red">是一种网络寻址和路由的策略</span>,使得资料可以根据路由拓朴来决定送到“最近”或“最好”的目的地。在任播中,在网络位址和网络节点之间存在一对多的关系：每一个位址对应一群接收节点,但在任何给定时间,只有其中之一可以接收到传送端来的资讯。<span style="color:red">在互联网中,通常使用边界网关协议来实现任播。</span>

<table style="text-align:center">
  <tr>
    <th>IPV4</th>
    <th>IPV6</th>
  </tr>
  <tr>
    <td colspan="2" center>单播</td>
  </tr>
  <tr>
    <td colspan="2" center>组播</td>
  </tr>
  <tr>
    <td>广播</td>
    <td>任播</td>
  </tr>
</table>

* ipv6中的广播,可以通过组播的形式实现

### 分类寻址

![ipv4地址空间](ipv4地址空间.png)

1. 其中A,B,C类用于internet(单播地址)中的接口地址,D类地址供组播使用
2. 有几个地址通常不作为单播地址使用.特别是地址快的第一个和最后一个

### 子网寻址

* 每一个IP地址都是**网络号+主机号**
  * 并不是每一个ip地址网络号主机号都是一样的,
  
| 类  | 网络数  | 主机号   |
| --- | ------- | -------- |
| A   | 128     | 16777216 |
| B   | 16384   | 65536    |
| C   | 2097152 | 256      |

* 下面是一个b类地址划分为子网的例子(这种划分可有网络管理员改变)

![b类地址划分为子网](b类地址划分为子网.png)

>通过子网寻址,一个站点被分配一个A类,B类,C类的网络号,保留一些剩余主机号进一步用于站点分配.该站点可能将基础地址中的主机部分进一步划分位一个子网号和一个主机号

* 由于当前的子网字段和主机字段的定义是有站点指定(不是由网络号分类来决定)
* 例如以上就是前16位是某些固定的号码,后十六位有站点管理员分配

### 子网掩码

> 子网掩码是由一台主机或者路由器使用的分配位,以确定如何从一台主机对应的IP地址中获得网络和子网信息.且子网掩码与ip对应的长度相同
>>简单的说:划分网络号和主机号的

* 例如:在一个子网下只要划分四个ip地址
  * 192.168.0.0 11000000.10101000.00000000.000000<span style="color:red">00</span>
  * 192.168.0.1 11000000.10101000.00000000.000000<span style="color:red">01</span>
  * 192.168.0.2 11000000.10101000.00000000.000000<span style="color:red">10</span>
  * 192.168.0.3 11000000.10101000.00000000.000000<span style="color:red">11</span>
  * 如果ip为192.168.0.4,就可以很容易的判断出不是该网络范围了
* 可以确定的位都是用1来,不能确定的都使用0
* 由此我们可以确定的是除了后两位的所有,除了后两位都设为0,得到子网掩码
* 225.225.225.252 11111111.11111111.11111111.11111100
* 用CIDR来表示就是192.168.0.0<span style="color:red">/30</span>,30代表其中子网掩码中的1的个数

> 在IPv6中没有子网掩码的概念,取而代之的是**前缀长度**和**接口ID**

1. 前缀长度默认是前64位,接口ID默认是后64位
2. 其中前缀代表的就是网络号,接口ID代表的就是主机号

### 特殊地址

>特殊用途地址,不会用作单播地址分配

| 前缀           | 特殊用途                                                  |
| -------------- | --------------------------------------------------------- |
| 0.0.0.0/8      | 本地网络中的主机.仅作为源IP地址使用                       |
| 10.0.0.0/8     | 专用网络(内联网)的地址.这种地址不会出现在公共的internet中 |
| 192.168.0.0/16 | 专用网络(内联网)的地址.这种地址不会出现在公共的internet中 |
| 172.16.0.0/12  | 专用网络(内联网)的地址.这种地址不会出现在公共的internet中 |
| 127.0.0.0/8    | 回环地址.一般只使用`127.0.0.1`                            |
169.254.0.0/16 链路本地地址,只用于一条链路,通常自动分配
192.0.0.0/24 | IETF协议分配(IANA保留)
192.88.99.0/24 用于6to4中继(任播地址)
192.18.0.0/15 | 用于基准和性能测试
192.0.2.0/24 | 批准用于文档中的TEST-NET-1.这种地址不会出现在公共的internet中
198.51.100.0/24 | TEST-NET-1地址.被批准用于文档中
203.0.113.0/24 | TEST-NET-1地址.被批准用于文档中
224.0.0.0/4 | IPv4组播地址(以前的D类),仅作为目的ip地址使用
240.0.0.0/4 | 保留空间(以前的E类),除了255.255.255.255
255.255.255.255/32 | 本地网络(受限的)广播

> IPV6的特殊地址

| 前缀          | 特殊用途                                                                                               |
| ------------- | ------------------------------------------------------------------------------------------------------ |
| ::/0          | 默认路由条目.不用于寻址                                                                                |
| ::/128        | 这个地址不可指定给某个网络接口,并且只有在主机尚未知道其来源IP时,才会用于软件中(相当于ipv中的0.0.0.0/8) |
| ::1/128       | IPv6的回环地址,(类似于ipv4中的127.0.0.1)                                                               |
| ::ffff:0:0/96 | Ipv4映射地址(只适用于内部主机)                                                                         |
| fe80::/10     | 这些链路本地地址指明,这些地址只在区域连线中是合法的,这有点(类似于IPv4中的169.254.0.0/16)               |
| fc00::/7      | 唯一区域地址(ULA)只可用于本地通信,(类似于IPv4的专用网络地址10.0.0.0/8、172.16.0.0/12和192.168.0.0/16)  |
| ff00::/8      | IPv6组播地址,仅作为目的IP地址使用                                                                      |
...

## Internet常遇简写

| 简写       | 名称                                      |
| ---------- | ----------------------------------------- |
| FIFO       | 先进先出                                  |
| FCFS       | 先到达先服务                              |
| TDM        | 时分复用                                  |
| VC         | 虚电路                                    |
| OSI        | 开放系统互连标准                          |
| ISO        | 国际标准化组织                            |
| PDU        | 消息对象(链路层称为帧,IP层称为IP数据报)   |
| ARP        | 地址解析协议                              |
| ICMP       | Internet控制消息协议(IP的辅助协议)`ping`  |
| IGMP       | 互联网组管理协议:(IPv4的一个辅助协议)     |
| DCCP       | 数据拥塞控制协议(介于TCP/UDP间的服务类型) |
| SCTP       | 流控制传输协议                            |
| SSH        | 安全外壳协议(22)                          |
| FTP        | 文件传输协议(20,21)                       |
| Telnet     | 远程终端协议(23)                          |
| SMTP       | 简单邮件传输协议(25)                      |
| DNS        | 域名系统(53)                              |
| HTTP/HTTPS | 超文本传输协议(80/443)                    |
| IMAP/IMAPS | 交互式邮件访问协议(143/993)               |
| SNMP       | 简单网络管理协议(161,162)                 |
| LDAP       | 轻量级目录访问协议(389)                   |
| DHCP       | 动态主机配置协议                          |
| IID        | 接口标识符                                |
| EUI        | 扩展唯一标识符                            |
| OUI        | 组织唯一标识符                            |
| CIDR       | 无类别域间路由                            |
| NAT        | 网络地址转换                              |
| NTP        | 网路时间协议                              |
| SAP        | 会话通告协议                              |
| SDP        | 会话描述协议                              |
| LAN        | 家庭局域网                                |
| WLAN       | 无线局域网                                |
| ICS        | Internet连接共享                          |
| LLC        | 逻辑链路控制                              |
| SFD        | 帧起始分割符                              |
| DST        | 目的地址                                  |
| SRC        | 源地址                                    |
| VLAN       | 虚拟局域网                                |
| STP        | 生成树协议                                |
| BPDU       | 网桥协议数据单元                          |
| RTS/CTS    | 请求发送/明确发送                         |
| ACK        | 重传/确认                                 |
| TSF        | 时间同步功能                              |
| PCF        | 点协调功能                                |
| DCF        | 分布式协调功能                            |
| HCF        | 混合协调功能                              |
| WPA        | WiFi保护访问                              |
| TKIP       | 临时密钥完整性协议                        |
| PSK        | 预共享密钥                                |
| PPP        | 点到点协议(协议集合)                      |
| LCP        | 链路控制协议                              |
| NCP        | IPv4:IP控制协议(IPCP)/IPv6:IPV6CP         |
| lo         | 回环接口                                  |
| PPTP       | 点对点隧道协议                            |
| UDL        | 单向链路                                  |
| DTCP       | 动态隧道配置协议                          |
